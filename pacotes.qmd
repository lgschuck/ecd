# Pacotes

## O que são pacotes?

Um pacote em R é basicamente um conjunto de funções e/ou funcionalidades criadas por terceiros que "expandem" o poder da linguagem R. A principal opção para isntalação de pacotes é através do [CRAN](https://cran.r-project.org/web/packages/index.html). O CRAN é um repositório que contém milhares de pacotes (19466 em maio de 2023). No CRAN também podem ser encontrados pacotes em versões "antigas". Caso algum pacote não esteja hospedado no CRAN, ele pode ser isntalado diretamente do arquivo fornecido pelo desenvolvedor do pacote.

Existem em R alguns pacotes "especiais" em R que compõem o próprio R. Este pacotes possuem sua versão idêntica a do R, este pacotes são "classificados" com prioridade "base".

## Pacotes Instalados

Podemos ver os pacotes instalados com o comando installed.packages:

```{r}
# Exibindo 5 primeiros
as.data.frame(installed.packages())$Package[1:5]

```
Com o comando installed.packages é possível buscar estas informações. Abaixo, a função head exibe as primeiras linhas, no caso n = 1, e a função t transpõe o o data.frame de colunas para linhas. Foram usadas para simplificar a visualização.

```{r}

pacotes <- as.data.frame(installed.packages())
# pacote base
t(head(pacotes[pacotes$Package =='base',], n = 1))
# pacote MASS
t(head(pacotes[pacotes$Package =='MASS',], n = 1))
# pacote data.table
t(head(pacotes[pacotes$Package =='data.table',], n = 1))


```

Pode ser visto no campo Priority que o pacote base é "base", isto significa que este faz parte da instalação do R. Já o pacote [MASS](https://cran.r-project.org/web/packages/MASS/index.html), por exemplo, é um pacote recomendado. O pacote data.table, um pacote "normal", não possui informação no campo Priority.

Também podemos visualizar dados do pacote (arquivo DESCRIPTION do próprio pacote) com o comando packageDescription:

```{r}
packageDescription('base')

```

## Pasta de Instalação

O R possui pastas de instalação dos pacotes. Para visualizá-las basta usar o comando .libPaths. A pasta padrão de instalação já possui diversos pacotes que foram instalados junto com o R (os pacotes "básicos" e os recomendados). 

```{r}
.libPaths()
list.files(.libPaths()[1])
list.files(.libPaths()[2])
```

## Pacotes Disponíveis

Função available.packages procura pacotes diosponíveis no valor informado no argumento repos. Por padrão é buscado de getOption("repos").

```{r}
options(repos = 'https://cran.rstudio.com/')

# Exibindo 5 primeiros
available.packages()[1:5]

```

## Dependências de Pacotes

O pacote tools oferece uma função para busca de dependências de pacotes. Inclusive oferecendo a opção de recursividade, ou seja, as dependências das dependências.

```{r}
tools::package_dependencies('dplyr')

tools::package_dependencies('dplyr', recursive = T)

```

------------------------------------------------------------------------

Última atualização: `r format(file.info('pacotes.qmd')$mtime, '%d/%m/%Y - %H:%M:%S')`
