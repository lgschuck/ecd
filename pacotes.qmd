# Pacotes

[Status](convencoes.html#status-do-material) üü¶üü®üü®

## O que s√£o pacotes?

Um pacote em R √© basicamente um conjunto de fun√ß√µes e/ou funcionalidades criadas por terceiros que "expandem" o poder da linguagem. A principal op√ß√£o para instala√ß√£o de pacotes √© atrav√©s do [CRAN](https://cran.r-project.org/web/packages/index.html). O CRAN √© um reposit√≥rio que cont√©m milhares de pacotes (`r`nrow(available.packages())`em`r `format(Sys.Date(), '%d/%m/%Y')` em maio de 2023). Nele tamb√©m podem ser encontrados pacotes em suas vers√µes "antigas". Caso algum pacote n√£o esteja hospedado no CRAN, ele tamb√©m pode ser instalado, diretamente do arquivo fornecido pelo desenvolvedor do pacote por exemplo (muitos distribuem atrav√©s do Github).

Existem alguns pacotes "especiais" em R que comp√µem a pr√≥pria linguagem. Estes pacotes possuem suas vers√µes id√™nticas √† da linguagem e s√£o "classificados" com prioridade "base". Assim quando se faz a instala√ß√£o da linguagem R, muitos pacotes tamb√©m s√£o instalados.

## Pacotes Instalados

Podemos ver os pacotes instalados com o comando `installed.packages`:

```{r}
# Exibindo 5 primeiros
as.data.frame(installed.packages())$Package[1:5]

```

A fun√ß√£o `installed.packages` retorna uma s√©rie de informa√ß√µes a respeito dos pacotes. Abaixo alguns exemplos de pacotes bastante utilizados. Para simplificar a visualiza√ß√£o foi usada fun√ß√£o `t`, que transp√µe o data.frame de colunas para linhas.

```{r}
pacotes <- as.data.frame(installed.packages())
# pacote base
t(pacotes[pacotes$Package == 'base',])
# pacote MASS
t(pacotes[pacotes$Package == 'MASS',])
# pacote data.table
t(pacotes[pacotes$Package == 'data.table',])

```

Pode ser visto no campo *Priority* que para o pacote base o conte√∫do √© "base", isto significa que este faz parte da instala√ß√£o do R. J√° o pacote [MASS](https://cran.r-project.org/web/packages/MASS/index.html), por exemplo, √© um pacote recomendado. O pacote data.table, que √© um pacote "normal", n√£o possui informa√ß√£o no campo *Priority*.

Tamb√©m podemos visualizar dados do pacote (arquivo *DESCRIPTION* do pr√≥prio pacote) com o comando `packageDescription`:

```{r}
packageDescription('base')

```

## Pasta de Instala√ß√£o

O R possui pastas de instala√ß√£o dos pacotes. Para visualiz√°-las basta usar o comando `.libPaths`. A pasta padr√£o de instala√ß√£o traz os diversos pacotes que foram instalados junto com o R (os "b√°sicos" e os recomendados).

```{r}
.libPaths()
# Exibir 10 primeiros da primeira pasta
list.files(.libPaths()[1])[1:10]
# Exibir 10 primeiros da segunda pasta
list.files(.libPaths()[2])[1:10]
```

## Pacotes Dispon√≠veis

A fun√ß√£o `available.packages` procura pacotes dispon√≠veis no valor informado no argumento repos. Por padr√£o √© buscado de getOption("repos").

```{r}
# Definir reposit√≥rio
options(repos = 'https://cran.rstudio.com/')

# Exibindo 5 primeiros
available.packages()[1:5]

```

## Depend√™ncias de Pacotes

Os pacotes podem e em sua maioria utilizam fun√ß√µes de outros pacotes. Estes "outros pacotes" s√£o denominadas de depend√™ncias. As informa√ß√µes de depend√™ncias tamb√©m constam no *DESCRIPTION* do pacote.

O pacote tools, que faz parte da base do R, oferece uma fun√ß√£o para busca de depend√™ncias de pacotes. Inclusive existe a op√ß√£o de recursividade, ou seja, busca tamb√©m as depend√™ncias das depend√™ncias do pacote desejado.

```{r}
tools::package_dependencies('dplyr')

tools::package_dependencies('dplyr', recursive = T)

```

## Instala√ß√£o de Pacotes

Para efetuar a instala√ß√£o de pacotes usa-se a fun√ß√£o `install.packages`. Os pacotes podem ser instalados diretamente de reposit√≥rios na Internet (como o CRAN) ou de arquivos locais.

------------------------------------------------------------------------

√öltima atualiza√ß√£o: `r format(file.info('pacotes.qmd')$mtime, '%d/%m/%Y - %H:%M:%S')`
