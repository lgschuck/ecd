# Pacotes

## O que são pacotes?

Um pacote em R é basicamente um conjunto de funções e/ou funcionalidades criadas por terceiros que "expandem" o poder da linguagem R. A principal opção para instalação de pacotes é através do [CRAN](https://cran.r-project.org/web/packages/index.html). O CRAN é um repositório que contém milhares de pacotes (19.466 em maio de 2023). No CRAN também podem ser encontrados pacotes em suas versões "antigas". Caso algum pacote não esteja hospedado no CRAN, ele também pode ser instalado, diretamente do arquivo fornecido pelo desenvolvedor do pacote por exemplo.

Existem alguns pacotes "especiais" em R que compõem a própria linguagem. Estes pacotes possuem suas versões idênticas à da linguagem e são "classificados" com prioridade "base".

## Pacotes Instalados

Podemos ver os pacotes instalados com o comando installed.packages:

```{r}
# Exibindo 5 primeiros
as.data.frame(installed.packages())$Package[1:5]

```
Com o comando installed.packages é possível buscar estas informações. Para simplificar a visualização foi usada função t, que transpõe o data.frame de colunas para linhas.

```{r}

pacotes <- as.data.frame(installed.packages())
# pacote base
t(pacotes[pacotes$Package == 'base',])
# pacote MASS
t(pacotes[pacotes$Package == 'MASS',])
# pacote data.table
t(pacotes[pacotes$Package == 'data.table',])

```

Pode ser visto no campo Priority que para o pacote  base o conteúdo é "base", isto significa que este faz parte da instalação do R. Já o pacote [MASS](https://cran.r-project.org/web/packages/MASS/index.html), por exemplo, é um pacote recomendado. O pacote data.table, que é um pacote "normal", não possui informação no campo Priority.

Também podemos visualizar dados do pacote (arquivo DESCRIPTION do próprio pacote) com o comando packageDescription:

```{r}
packageDescription('base')

```

## Pasta de Instalação

O R possui pastas de instalação dos pacotes. Para visualizá-las basta usar o comando .libPaths. A pasta padrão de instalação possui diversos pacotes que foram instalados junto com o R (os pacotes "básicos" e os recomendados). 

```{r}
.libPaths()
list.files(.libPaths()[1])
list.files(.libPaths()[2])
```

## Pacotes Disponíveis

Função available.packages procura pacotes disponíveis no valor informado no argumento repos. Por padrão é buscado de getOption("repos").

```{r}
options(repos = 'https://cran.rstudio.com/')

# Exibindo 5 primeiros
available.packages()[1:5]

```

## Dependências de Pacotes

O pacote tools oferece uma função para busca de dependências de pacotes. Inclusive oferecendo a opção de recursividade, ou seja, busca também as dependências das dependências.

```{r}
tools::package_dependencies('dplyr')

tools::package_dependencies('dplyr', recursive = T)

```

------------------------------------------------------------------------

Última atualização: `r format(file.info('pacotes.qmd')$mtime, '%d/%m/%Y - %H:%M:%S')`
