# Controles de Fluxo

[Status](convencoes.html#status-do-material) üü®üü®üü®

## Introdu√ß√£o

Assim como outras linguagens de programa√ß√£o R oferece uma s√©rie de operadores para controle de fluxo de c√≥digo.

::: callout-note
Controles de fluxo s√£o declara√ß√µes usadas na linguagem, mas **n√£o s√£o fun√ß√µes**.
:::

## If

O controle **if** √© a estrutura de controle mais b√°sica que tomada de decis√£o e "direcionamento" de c√≥digo. Em caso negativo do teste l√≥gico nenhuma opera√ß√£o √© executada.

```{r, erro = T}
x <- 5

# C√≥digos equivalentes
if(x > 4) print('x √© maior do que quatro')
if(x > 4) { print('x √© maior do que quatro')}
if(x > 4) {
  print('x √© maior do que quatro') }
if(x > 4) { print('x √© maior do que quatro')
}
if(x > 4) {
  print('x √© maior do que quatro')
} # o mais organizado
```

Note que se o teste n√£o retornar `TRUE` ou `FALSE` o R reportar√° erro.

```{r, error = T}
x <- NA

if (x > 4) print('x √© maior do que quatro')
```

## Ifelse

R possui a **fun√ß√£o** `ifelse`, que apesar de n√£o ser para controle de fluxo, possui l√≥gica de uso muito semelhante ao **if** e por este motivo ser√° tratada neste cap√≠tulo. Esta fun√ß√£o efetua teste em valor de entrada e define um valor a ser retornado caso verdadeiro e outro caso falso.

O retorno de `ifelse` possui o mesmo formato da estrutura informada no argumento **test**. Esta fun√ß√£o pode ser usada para atribui√ß√£o em data frames de forma mais sucinta.

Vejamos um exemplo:

```{r, erro = T}
df_mtcars6 <-
  mtcars |> 
  subset(select = c('hp', 'mpg', 'cyl')) |> 
  head()

df_mtcars6                 

df_mtcars6[df_mtcars6$hp > 100, 'RESULTADO'] <-
  df_mtcars6[df_mtcars6$hp > 100, ]$mpg

df_mtcars6[df_mtcars6$hp <= 100, 'RESULTADO'] <-
  df_mtcars6[df_mtcars6$hp <= 100,]$cyl

df_mtcars6

# com ifelse
df_mtcars6$RESULTADO2 <- 
  ifelse(df_mtcars6$hp > 100, 
         df_mtcars6$mpg, 
         df_mtcars6$cyl)

df_mtcars6
```

## If Else

O **if else** pode ser usado para inserir uma a√ß√£o ap√≥s o retorno negativo do teste feito pelo **if**.

```{r}
x <- 3
if(x > 4) {
  print('x √© maior do que quatro')
} else {
   print('x n√£o √© maior do que quatro')
}
```

Veja que podem ser usadas muitas declara√ß√£o **else** em sequ√™ncia.

```{r}
x <- 3
if(x > 3) {
  print('x √© maior do que tr√™s')
} else if (x < 3){
  print('x √© menor do que tr√™s')
} else if (x == 3){
  print('x √© igual a tr√™s')
}
```

## La√ßo For

Um la√ßo **for** √© uma estrutura que efetua uma determinada quantidade de passos de acordo com a sequ√™ncia informada. a declara√ß√£o deve ser feita no formato: `for(x in seq)`, sendo x a vari√°vel que ser√° atualizada a cada itera√ß√£o iniciando no ¬¥rimeiro valor informado em `seq` e ecerrando no √∫ltimo. Um exemplo:

```{r}
for(x in 1:5){
  print(paste('Itera√ß√£o:', x))
}
```

Caso se deseje mudar o incremento a cada passo pode ser usada a fun√ß√£o `seq`. Tamb√©m √© poss√≠vel usar um passo decrescente.

```{r}
for(x in seq(2, 1, -0.25)) {
  print(paste('Valor de x:', x))
}
```

No eemplo acima, x √© inicializado com valor 1 e vvai sendo incrementado em 1 unidade ao in√≠cio do pr√≥ximo passo. Um la√ßo **for** tamb√©m pode fazer itera√ß√µes sobre vetores com texto, por exemplo.

```{r}
for(i in c('S√£o Paulo', 'Rio de Janeiro', 'Porto Alegre')){
  print(paste('Cidade atual:', i))
}

```

No la√ßo **for** a sequ√™ncia no qual ser√° feita a itera√ß√£o √© considerada antes de se iniciar o la√ßo, assim mesmo se houver alguma altera√ß√£o nesta sequ√™ncia em um dos passos esta altera√ß√£o n√£o impactar√° na execu√ß√£o.

```{r}
x <- 3
for(i in 1:x) {
  x <- x + 2
  print(x)
}
```

## While

::: callout-note
## For x While

Um la√ßo for √© utilizado quando se tem uma sequ√™ncia definida de passos. Caso se deseje executar alguma opera√ß√£o at√© o atendimeto de uma condi√ß√£o, use **while**.
:::

## Repeat

------------------------------------------------------------------------

√öltima atualiza√ß√£o: `r format(file.info('r_controles_fluxo.qmd')$mtime, '%d/%m/%Y - %H:%M:%S')`
